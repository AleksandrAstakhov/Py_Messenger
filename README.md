# Py_messenger

## Описание

**Py_messenger** — это клиент-серверное приложение для обмена сообщениями, которое позволяет пользователям отправлять и получать сообщения в группах. Все сообщения сохраняются в базе данных, обеспечивая возможность просмотра истории переписки.

## Архитектура

### Общая структура

Приложение состоит из двух основных компонентов:

1. **Клиентская часть** (Client)
2. **Серверная часть** (Server)

### Клиентская часть

Клиентская часть отвечает за взаимодействие с пользователем и отправку запросов на сервер. Основные функции клиента:

- Регистрация и аутентификация пользователя
- Отправка и получение сообщений
- Отображение истории сообщений группы
- Обработка пользовательского интерфейса

#### Технологии

- Python с использованием библиотеки `tkinter` для создания графического интерфейса
- Сетевые библиотеки (например, `socket` или `requests`) для взаимодействия с сервером

### Серверная часть

Серверная часть обрабатывает запросы от клиентов и управляет сохранением данных. Основные функции сервера:

- Обработка запросов на регистрацию и аутентификацию пользователей
- Получение и отправка сообщений между пользователями
- Сохранение истории сообщений в базе данных
- Управление подключениями пользователей

#### Технологии

- Python с использованием фреймворка `Flask` или `FastAPI` для создания RESTful API
- База данных (например, `SQLite` или `PostgreSQL`) для хранения истории сообщений и информации о пользователях
- Библиотеки для работы с сетевыми соединениями и асинхронными операциями (например, `asyncio`)

### База данных

База данных хранит следующие сущности:

- **Пользователи**: информация о зарегистрированных пользователях (имя, пароль, статус и т.д.)
- **Сообщения**: информация о каждом сообщении (идентификатор отправителя, текст сообщения, временная метка, идентификатор группы)

### Взаимодействие компонентов

1. **Клиент** отправляет запросы на сервер через HTTP (или сокеты) для выполнения действий, таких как отправка сообщений или запрос истории.
2. **Сервер** обрабатывает запросы, взаимодействует с базой данных для сохранения или извлечения данных и отправляет ответы обратно клиенту.
3. **База данных** обеспечивает долговременное хранение всех сообщений и информации о пользователях, позволяя серверу эффективно управлять данными.

## Установка и запуск

### Предусловия

- Установленный Python (версии 3.7 и выше)
- Установленные зависимости

### Установка зависимостей

```bash
pip install -r requirements.txt

```
## Зпуск приложения:

Можно запускать несколькими способами.

В обоих случаях рекомендовано запускать клиента в виртуальном окружении

### 1. Собрав через docker-compose

Для этого нужен сам docker-compose.

В этом случае сервер будет помещен в контейнер, и в корте проекта будет создан каталог. data с базой данных сообщений. Она связана с базой данных в контейнере.

Также не забудьте настроить переменные окружения. 

По дефолту они настроены на сборку через docker-compose на локальном хосте.(для простого теста можно ничего не менять)

Если нужно детальней про переменные окружения, смотрите следующий пункт.

Команда для сборки образа:
```
docker-compose build
```

Команда для запуска контейнера:

```
docker-compose up
```

Запускаем клиент:

```
python client.py
```

### 2. На прямую

Запустить соответствующие файлы на сервере и на клиенте.

Не забудьте правильно настроить переменные окружения SERVER_HOST и SERVER_PORT.

Это можно сделать, создав файл .env и указав значения переменных:

```
SERVER_HOST=127.0.0.1
SERVER_PORT=5000
```

или просто передав их через командную строку:

```
SERVER_HOST=127.0.0.1 SERVER_PORT=5000 python server.py
SERVER_HOST=127.0.0.1 SERVER_PORT=5000 python client.py
```
